## 数据流模式下，云原生服务的弹性伸缩

### 行情业务下的 k8s 资源使用

行情数据的链路主要是数据分发，和简单计算因此 CPU、Cache、IO 都会影响行情数据的处理速度。
在云原生的环境下，瞬间交易的峰值，会直接将 request 的资源使用直接到达峰值，在传统的云原生服务里，我们通过弹性的扩缩容来应对这种系统压力。
但是在实际的业务场景里，资源的扩缩容速度远不能跟上极速交易性能和大量行情数据分发的速度。导致在自动扩缩容场景下，出现了数据上的波动。
这里一方面在架构上可以做拆分，缓解行情数据对整个系统带来的冲击，这里先不讨论。
针对资源的配置上，我们关注更多的是 CPU 的节流率和消息积攒情况。

- CPU 节流率
  我们的资源配置，是根据正常运行场景下估算的资源；比如 1c1G;相比互联网的访问流量具有根据用户数量的变动而线性增加；行情的流量主要来自于交易所的报价，数据流量稳定，在 K8S 集群中，更好的估算出资源需求，最大化利用资源。
